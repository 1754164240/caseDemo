# AIæ™ºèƒ½ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆBodyï¼‰åŠŸèƒ½

**ç‰ˆæœ¬**ï¼šv1.3.6  
**å‘å¸ƒæ—¥æœŸ**ï¼š2024-12-18  
**åŠŸèƒ½ç±»å‹**ï¼šğŸ¤– AIå¢å¼º

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

åœ¨åˆ›å»ºè‡ªåŠ¨åŒ–ç”¨ä¾‹æ—¶ï¼Œç³»ç»Ÿç°åœ¨ä¼šä½¿ç”¨AIæ ¹æ®æµ‹è¯•ç”¨ä¾‹çš„å…·ä½“ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€æè¿°ã€æ­¥éª¤ç­‰ï¼‰æ™ºèƒ½ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆcaseDefineä¸­çš„bodyéƒ¨åˆ†ï¼‰ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ¨¡æ¿ä¸­çš„ç©ºæ•°æ®ã€‚

---

## ğŸš€ æ ¸å¿ƒä¼˜åŠ¿

### ä¹‹å‰çš„é—®é¢˜

```
âŒ bodyæ•°æ®ä»æ¨¡æ¿å¤åˆ¶
âŒ bodyæ•°æ®ä¸ºç©ºæˆ–ä¸ç›¸å…³
âŒ éœ€è¦æ‰‹åŠ¨å¡«å†™æµ‹è¯•æ•°æ®
âŒ æµ‹è¯•æ•°æ®ä¸ç”¨ä¾‹å†…å®¹ä¸åŒ¹é…
```

### ç°åœ¨çš„è§£å†³æ–¹æ¡ˆ

```
âœ… AIæ ¹æ®ç”¨ä¾‹ä¿¡æ¯æ™ºèƒ½ç”Ÿæˆ
âœ… æµ‹è¯•æ•°æ®ç¬¦åˆä¸šåŠ¡é€»è¾‘
âœ… è‡ªåŠ¨ç”Ÿæˆ1-3æ¡æµ‹è¯•æ•°æ®
âœ… æ•°æ®ä¸å­—æ®µå®šä¹‰å®Œå…¨åŒ¹é…
âœ… çœŸå®ã€åˆç†çš„æµ‹è¯•åœºæ™¯
```

---

## ğŸ”„ å®Œæ•´æµç¨‹

### åŸæœ‰æµç¨‹ï¼ˆv1.3.5.1ï¼‰

```
1. è·å–åœºæ™¯çš„ç”¨ä¾‹åˆ—è¡¨
   â†“
2. AIé€‰æ‹©æœ€ä½³æ¨¡æ¿ç”¨ä¾‹
   â†“
3. è·å–æ¨¡æ¿ç”¨ä¾‹è¯¦æƒ…ï¼ˆåŒ…å«headerå’Œbodyï¼‰
   â†“
4. ç›´æ¥ä½¿ç”¨æ¨¡æ¿çš„bodyï¼ˆå¯èƒ½ä¸ºç©ºï¼‰
   â†“
5. åˆ›å»ºç”¨ä¾‹å’Œæ˜ç»†
```

### æ–°æµç¨‹ï¼ˆv1.3.6ï¼‰

```
1. è·å–åœºæ™¯çš„ç”¨ä¾‹åˆ—è¡¨
   â†“
2. AIé€‰æ‹©æœ€ä½³æ¨¡æ¿ç”¨ä¾‹
   â†“
3. è·å–æ¨¡æ¿ç”¨ä¾‹è¯¦æƒ…ï¼ˆè·å–headerå­—æ®µå®šä¹‰ï¼‰
   â†“
4. ğŸ†• AIæ ¹æ®æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆbodyï¼‰
   â†“
5. åˆ›å»ºç”¨ä¾‹å’Œæ˜ç»†ï¼ˆåŒ…å«AIç”Ÿæˆçš„bodyï¼‰
```

---

## ğŸ§  AIç”Ÿæˆé€»è¾‘

### è¾“å…¥ä¿¡æ¯

AIä¼šç»¼åˆä»¥ä¸‹ä¿¡æ¯ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼š

#### 1. æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯
- **æ ‡é¢˜**ï¼šæµ‹è¯•ç”¨ä¾‹çš„åç§°
- **æè¿°**ï¼šè¯¦ç»†æè¿°
- **å‰ç½®æ¡ä»¶**ï¼šæ‰§è¡Œå‰çš„å‡†å¤‡å·¥ä½œ
- **æµ‹è¯•æ­¥éª¤**ï¼šå…·ä½“çš„æ“ä½œæ­¥éª¤
- **é¢„æœŸç»“æœ**ï¼šæœŸæœ›çš„è¾“å‡º
- **æµ‹è¯•ç±»å‹**ï¼šåŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ç­‰
- **ä¼˜å…ˆçº§**ï¼šP0, P1, P2ç­‰

#### 2. å­—æ®µå®šä¹‰ï¼ˆheaderï¼‰
- **å­—æ®µå**ï¼ˆrowï¼‰ï¼šå¦‚ `CP_accidentReason_1`
- **å­—æ®µæ˜¾ç¤ºå**ï¼ˆrowNameï¼‰ï¼šå¦‚ "ç†èµ”_å‡ºé™©åŸå› _1"
- **å­—æ®µç±»å‹**ï¼ˆtypeï¼‰ï¼šæ•°æ®ç±»å‹
- **æ ‡è¯†**ï¼ˆflagï¼‰ï¼šç‰¹æ®Šæ ‡è®°

#### 3. ç¯èŠ‚ä¿¡æ¯ï¼ˆcirculationï¼‰
- **ç¯èŠ‚åç§°**ï¼šå¦‚ "ç†èµ”"
- **å˜é‡ç»„**ï¼ˆvargroupï¼‰ï¼šå¦‚ "CP"

### AI Prompt ç»“æ„

```
ä½ æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•ä¸“å®¶ã€‚è¯·æ ¹æ®ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯å’Œå­—æ®µå®šä¹‰ï¼Œç”Ÿæˆ1-3æ¡åˆç†çš„æµ‹è¯•æ•°æ®ã€‚

ã€æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯ã€‘
æ ‡é¢˜ï¼šXXX
æè¿°ï¼šXXX
å‰ç½®æ¡ä»¶ï¼šXXX
æµ‹è¯•æ­¥éª¤ï¼šXXX
é¢„æœŸç»“æœï¼šXXX
æµ‹è¯•ç±»å‹ï¼šXXX
ä¼˜å…ˆçº§ï¼šXXX
ç¯èŠ‚ä¿¡æ¯ï¼šXXX

ã€å­—æ®µå®šä¹‰ã€‘
- å­—æ®µæ˜¾ç¤ºå (å­—æ®µå: xxx, ç±»å‹: xxx, æ ‡è¯†: xxx)
- ...

ã€è¦æ±‚ã€‘
1. æ ¹æ®æµ‹è¯•ç”¨ä¾‹çš„å…·ä½“å†…å®¹ï¼Œç”Ÿæˆç¬¦åˆå­—æ®µè¦æ±‚çš„æµ‹è¯•æ•°æ®
2. æµ‹è¯•æ•°æ®è¦çœŸå®ã€åˆç†ã€ç¬¦åˆä¸šåŠ¡é€»è¾‘
3. ç”Ÿæˆ1-3æ¡æµ‹è¯•æ•°æ®
4. å­—æ®µå€¼è¦ç¬¦åˆå­—æ®µç±»å‹å’Œä¸šåŠ¡å«ä¹‰
5. æ—¥æœŸæ ¼å¼ä½¿ç”¨ YYYYMMDD
6. ä»£ç ç±»å­—æ®µè¦ä½¿ç”¨æ­£ç¡®çš„ä¸šåŠ¡ä»£ç 

è¯·ä»¥JSONæ ¼å¼è¿”å›...
```

### è¾“å‡ºæ ¼å¼

AIä¼šç”Ÿæˆç¬¦åˆä»¥ä¸‹æ ¼å¼çš„JSONæ•°æ®ï¼š

```json
[
    {
        "casedesc": "æµ‹è¯•åœºæ™¯æè¿°",
        "var": {
            "Cont_contno": "IP3713202500007096",
            "Risk_riskcode": "ADDTAE",
            "CP_accidentType_1": "è¢«ä¿äºº",
            "CP_accidentReason_1": "1-ç–¾ç—…",
            "CP_claimType_1": "02-èº«æ•…",
            "CP_accidentDay_1": "20250120"
        }
    },
    {
        "casedesc": "å¦ä¸€ä¸ªæµ‹è¯•åœºæ™¯",
        "var": {
            // å¦ä¸€ç»„æµ‹è¯•æ•°æ®
        }
    }
]
```

ç³»ç»Ÿä¼šå°†å…¶è½¬æ¢ä¸ºå®Œæ•´çš„bodyæ ¼å¼ï¼š

```json
{
    "casezf": "1",
    "casedesc": "æµ‹è¯•åœºæ™¯æè¿°",
    "var": { /* å­—æ®µå€¼ */ },
    "hoperesult": "æˆåŠŸç»“æ¡ˆ",
    "iscaserun": false,
    "caseBodySN": 1
}
```

---

## ğŸ“‹ æ—¥å¿—è¾“å‡ºç¤ºä¾‹

### æ­¥éª¤4ï¼šAIç”Ÿæˆæµ‹è¯•æ•°æ®

```bash
[INFO] æ­¥éª¤4: ä½¿ç”¨AIæ ¹æ®æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯ç”Ÿæˆæµ‹è¯•æ•°æ®
[INFO] è°ƒç”¨AIç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆåŸºäº16ä¸ªå­—æ®µï¼‰

[DEBUG] ========== AI Prompt å¼€å§‹ ==========
ä½ æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•ä¸“å®¶ã€‚è¯·æ ¹æ®ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯å’Œå­—æ®µå®šä¹‰ï¼Œç”Ÿæˆ1-3æ¡åˆç†çš„æµ‹è¯•æ•°æ®ã€‚

ã€æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯ã€‘
æ ‡é¢˜ï¼šéªŒè¯ç†èµ”èº«æ•…èµ”ä»˜
æè¿°ï¼šéªŒè¯è¢«ä¿äººå› ç–¾ç—…èº«æ•…æ—¶çš„ç†èµ”æµç¨‹
å‰ç½®æ¡ä»¶ï¼šä¿å•å·²ç”Ÿæ•ˆ
æµ‹è¯•æ­¥éª¤ï¼š1. æäº¤ç†èµ”ç”³è¯·...
é¢„æœŸç»“æœï¼šæˆåŠŸç»“æ¡ˆ
æµ‹è¯•ç±»å‹ï¼šåŠŸèƒ½æµ‹è¯•
ä¼˜å…ˆçº§ï¼šP1
ç¯èŠ‚ä¿¡æ¯ï¼š
- ç†èµ” (CP)

ã€å­—æ®µå®šä¹‰ã€‘
- ä¿å•ä¿¡æ¯_ä¿å•å· (å­—æ®µå: Cont_contno)
- é™©ç§_é™©ç§ç¼–ç  (å­—æ®µå: Risk_riskcode, æ ‡è¯†: RiskFlag)
- ç†èµ”_å‡ºé™©äººç±»å‹_1 (å­—æ®µå: CP_accidentType_1)
- ç†èµ”_å‡ºé™©åŸå› _1 (å­—æ®µå: CP_accidentReason_1)
- ç†èµ”_ç†èµ”ç±»å‹_1 (å­—æ®µå: CP_claimType_1)
...

ã€è¦æ±‚ã€‘
1. æ ¹æ®æµ‹è¯•ç”¨ä¾‹çš„å…·ä½“å†…å®¹ï¼Œç”Ÿæˆç¬¦åˆå­—æ®µè¦æ±‚çš„æµ‹è¯•æ•°æ®
2. æµ‹è¯•æ•°æ®è¦çœŸå®ã€åˆç†ã€ç¬¦åˆä¸šåŠ¡é€»è¾‘
...

è¯·ä»¥JSONæ ¼å¼è¿”å›...
[DEBUG] ========== AI Prompt ç»“æŸ ==========

[DEBUG] ========== AI Response å¼€å§‹ ==========
[
    {
        "casedesc": "ç–¾ç—…èº«æ•…ç†èµ”-æ­£å¸¸åœºæ™¯",
        "var": {
            "Cont_contno": "IP3713202500007096",
            "Risk_riskcode": "ADDTAE",
            "CP_accidentType_1": "è¢«ä¿äºº",
            "CP_accidentReason_1": "1-ç–¾ç—…",
            "CP_claimType_1": "02-èº«æ•…",
            "CP_cct_1": "1",
            "CP_clmInsBnftECD_1": "ADDTAE4001",
            "CP_StmSrcCd_1": "02-ä¸ªé™©",
            "CP_isCheck_1": "N",
            "CP_accidentDay_1": "20250120"
        }
    },
    {
        "casedesc": "æ„å¤–èº«æ•…ç†èµ”",
        "var": {
            "Cont_contno": "IP3713202500106628",
            "Risk_riskcode": "ADDTAE",
            "CP_accidentType_1": "è¢«ä¿äºº",
            "CP_accidentReason_1": "2-æ„å¤–",
            "CP_claimType_1": "02-èº«æ•…",
            "CP_cct_1": "1",
            "CP_clmInsBnftECD_1": "ADDTAE4001",
            "CP_StmSrcCd_1": "02-ä¸ªé™©",
            "CP_isCheck_1": "N",
            "CP_accidentDay_1": "20250731"
        }
    }
]
[DEBUG] ========== AI Response ç»“æŸ ==========

[INFO] âœ… AIç”Ÿæˆäº† 2 æ¡æµ‹è¯•æ•°æ®
[INFO] âœ… å·²å°†AIç”Ÿæˆçš„ 2 æ¡æµ‹è¯•æ•°æ®æ·»åŠ åˆ°caseDefine
```

### æ­¥éª¤5ï¼šåˆ›å»ºç”¨ä¾‹å’Œæ˜ç»†

```bash
[INFO] æ­¥éª¤5: ä¸€æ¬¡æ€§åˆ›å»ºç”¨ä¾‹å’Œæ˜ç»†
[INFO] ä½¿ç”¨æ¨¡æ¿çš„circulationä¿¡æ¯: [{'num': 2, 'name': 'ç†èµ”', 'vargroup': 'CP'}]
[INFO] âœ… caseDefine å·²æ·»åŠ : 16 ä¸ªå­—æ®µ(header), 2 ä¸ªæµ‹è¯•æ•°æ®(body)
[INFO] è°ƒç”¨è‡ªåŠ¨åŒ–å¹³å°åˆ›å»ºç”¨ä¾‹å’Œæ˜ç»†
[INFO] URL: http://localhost:8087/ai/case/createCaseAndBody
[INFO] ç”¨ä¾‹åç§°: éªŒè¯ç†èµ”èº«æ•…èµ”ä»˜
[INFO] Payload keys: ['name', 'moduleId', 'sceneId', 'scenarioType', 'description', 'tags', 'nodePath', 'type', 'project', 'sceneIdModule', 'circulation', 'caseDefine']
[INFO] Circulation: 1 ä¸ªç¯èŠ‚
[INFO] CaseDefine: header=16, body=2
[INFO] å“åº”çŠ¶æ€ç : 200
[INFO] ç”¨ä¾‹å’Œæ˜ç»†åˆ›å»ºæˆåŠŸ
```

---

## ğŸ¨ ç”Ÿæˆçš„æµ‹è¯•æ•°æ®ç‰¹ç‚¹

### 1. ä¸šåŠ¡åˆç†æ€§

- **ä¿å•å·æ ¼å¼**ï¼š`IP + åˆ†å…¬å¸ä»£ç  + å¹´ä»½ + æµæ°´å·`
- **æ—¥æœŸæ ¼å¼**ï¼š`YYYYMMDD`ï¼ˆå¦‚ 20250120ï¼‰
- **ä¸šåŠ¡ä»£ç **ï¼šä½¿ç”¨çœŸå®çš„ä¸šåŠ¡ç¼–ç ï¼ˆå¦‚ 1-ç–¾ç—…ã€02-èº«æ•…ï¼‰

### 2. å¤šæ ·æ€§

AIä¼šæ ¹æ®æµ‹è¯•ç”¨ä¾‹çš„æè¿°ç”Ÿæˆå¤šä¸ªåœºæ™¯ï¼š
- ä¸»è¦æµ‹è¯•åœºæ™¯ï¼ˆæ­£å¸¸æµç¨‹ï¼‰
- è¾¹ç•Œåœºæ™¯
- å¼‚å¸¸åœºæ™¯ï¼ˆå¦‚é€‚ç”¨ï¼‰

### 3. å®Œæ•´æ€§

æ¯æ¡æµ‹è¯•æ•°æ®åŒ…å«ï¼š
- **casedesc**ï¼šæ¸…æ™°çš„åœºæ™¯æè¿°
- **var**ï¼šæ‰€æœ‰å¿…éœ€å­—æ®µçš„å€¼
- **è‡ªåŠ¨å¡«å……å­—æ®µ**ï¼šcasezf, hoperesult, iscaserun, caseBodySN

---

## ğŸ” è°ƒè¯•å’ŒéªŒè¯

### æŸ¥çœ‹AIè°ƒç”¨è¯¦æƒ…

åœ¨åç«¯æ—¥å¿—ä¸­æŸ¥æ‰¾ï¼š
```bash
[DEBUG] ========== AI Prompt å¼€å§‹ ==========
```

å¯ä»¥çœ‹åˆ°ï¼š
1. **å‘é€ç»™AIçš„å®Œæ•´æç¤ºè¯**ï¼šåŒ…å«æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯å’Œå­—æ®µå®šä¹‰
2. **AIçš„åŸå§‹å“åº”**ï¼šJSONæ ¼å¼çš„æµ‹è¯•æ•°æ®
3. **è§£æç»“æœ**ï¼šç”Ÿæˆçš„æµ‹è¯•æ•°æ®æ¡æ•°

### éªŒè¯ç”Ÿæˆçš„æ•°æ®

æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
1. âœ… bodyæ•°ç»„ä¸ä¸ºç©º
2. âœ… æ¯æ¡æ•°æ®åŒ…å«casedescå’Œvar
3. âœ… varä¸­çš„å­—æ®µåä¸headerä¸­çš„å®šä¹‰åŒ¹é…
4. âœ… å­—æ®µå€¼ç¬¦åˆä¸šåŠ¡è§„åˆ™

---

## âš ï¸ å¼‚å¸¸å¤„ç†

### AIæœåŠ¡ä¸å¯ç”¨

```bash
[WARNING] AIæœåŠ¡ä¸å¯ç”¨ï¼Œè¿”å›ç©ºbody
```

**åŸå› **ï¼šæ— æ³•è¿æ¥åˆ°AIæœåŠ¡æˆ–æ•°æ®åº“é…ç½®ç¼ºå¤±

**è§£å†³**ï¼šæ£€æŸ¥AIæœåŠ¡é…ç½®å’Œæ•°æ®åº“è¿æ¥

### JSONè§£æå¤±è´¥

```bash
[ERROR] è§£æAIè¿”å›çš„JSONå¤±è´¥: ...
[DEBUG] AIè¿”å›å†…å®¹: ...
```

**åŸå› **ï¼šAIè¿”å›çš„ä¸æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼

**è§£å†³**ï¼šAIæœåŠ¡ä¼šè‡ªåŠ¨é™çº§ï¼Œè¿”å›ç©ºbodyï¼Œç”¨ä¾‹ä»å¯æ­£å¸¸åˆ›å»º

### ç¼ºå°‘å¿…è¦ä¿¡æ¯

```bash
[WARNING] âš ï¸ ç¼ºå°‘å¿…è¦ä¿¡æ¯ï¼Œæ— æ³•ç”Ÿæˆæµ‹è¯•æ•°æ®
[WARNING] ç¼ºå°‘headerå­—æ®µå®šä¹‰
```

**åŸå› **ï¼šæ¨¡æ¿ç”¨ä¾‹æ²¡æœ‰å­—æ®µå®šä¹‰

**è§£å†³**ï¼šé€‰æ‹©åŒ…å«å®Œæ•´å­—æ®µå®šä¹‰çš„æ¨¡æ¿ç”¨ä¾‹

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| ç‰¹æ€§ | v1.3.5.1åŠä¹‹å‰ | v1.3.6ï¼ˆå½“å‰ï¼‰ |
|------|---------------|---------------|
| **bodyæ¥æº** | æ¨¡æ¿å¤åˆ¶ | AIæ™ºèƒ½ç”Ÿæˆ |
| **æ•°æ®ç›¸å…³æ€§** | å¯èƒ½ä¸ç›¸å…³ | å®Œå…¨åŒ¹é…æµ‹è¯•ç”¨ä¾‹ |
| **æ•°æ®è´¨é‡** | ä¾èµ–æ¨¡æ¿è´¨é‡ | AIä¿è¯ä¸šåŠ¡åˆç†æ€§ |
| **æ•°æ®å¤šæ ·æ€§** | å•ä¸€ | 1-3æ¡ä¸åŒåœºæ™¯ |
| **æ‰‹åŠ¨å·¥ä½œ** | éœ€è¦åç»­ç¼–è¾‘ | å¼€ç®±å³ç”¨ |
| **è°ƒè¯•ä¿¡æ¯** | ç®€å• | è¯¦ç»†çš„promptå’Œresponseæ—¥å¿— |

---

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### 1. ç¡®ä¿é…ç½®æ­£ç¡®

- âœ… AIæœåŠ¡é…ç½®å·²è®¾ç½®ï¼ˆæ•°æ®åº“æˆ–ç¯å¢ƒå˜é‡ï¼‰
- âœ… è‡ªåŠ¨åŒ–å¹³å°APIåœ°å€å·²é…ç½®
- âœ… æ¨¡å—IDå·²é…ç½®

### 2. åˆ›å»ºæµ‹è¯•ç”¨ä¾‹

åœ¨æµ‹è¯•ç”¨ä¾‹ç®¡ç†ä¸­åˆ›å»ºæ–°ç”¨ä¾‹ï¼Œå¡«å†™ï¼š
- **æ ‡é¢˜**ï¼šæ¸…æ™°æ˜ç¡®
- **æè¿°**ï¼šè¯¦ç»†çš„ä¸šåŠ¡åœºæ™¯
- **æµ‹è¯•æ­¥éª¤**ï¼šå…·ä½“çš„æ“ä½œæ­¥éª¤
- **é¢„æœŸç»“æœ**ï¼šæœŸæœ›çš„è¾“å‡º

### 3. ç‚¹å‡»"è‡ªåŠ¨åŒ–"æŒ‰é’®

ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
1. åŒ¹é…æœ€ä½³åœºæ™¯
2. é€‰æ‹©æœ€ä½³æ¨¡æ¿ç”¨ä¾‹
3. æå–å­—æ®µå®šä¹‰ï¼ˆheaderï¼‰
4. ğŸ†• **AIç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆbodyï¼‰**
5. åˆ›å»ºå®Œæ•´çš„è‡ªåŠ¨åŒ–ç”¨ä¾‹

### 4. æŸ¥çœ‹ç»“æœ

åœ¨æˆåŠŸæç¤ºä¸­å¯ä»¥çœ‹åˆ°ï¼š
- åŒ¹é…çš„åœºæ™¯ä¿¡æ¯
- ä½¿ç”¨çš„æ¨¡æ¿ç”¨ä¾‹
- **ç”Ÿæˆçš„æµ‹è¯•æ•°æ®æ¡æ•°**

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ç¼–å†™é«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹

AIç”Ÿæˆçš„æ•°æ®è´¨é‡å–å†³äºæµ‹è¯•ç”¨ä¾‹ä¿¡æ¯çš„å®Œæ•´æ€§ï¼š

**å¥½çš„ä¾‹å­**ï¼š
```
æ ‡é¢˜ï¼šéªŒè¯ç†èµ”èº«æ•…èµ”ä»˜é‡‘é¢è®¡ç®—
æè¿°ï¼šåœ¨ç†èµ”å®¡æ ¸ç¯èŠ‚ï¼ŒéªŒè¯ç³»ç»Ÿå¯¹BANTBCèº«æ•…ä¿é™©é‡‘çš„è®¡ç®—é€»è¾‘ï¼ˆå–å·²äº¤ä¿è´¹ä¸èº«æ•…å½“æ—¥ç°é‡‘ä»·å€¼çš„è¾ƒå¤§è€…ï¼‰
å‰ç½®æ¡ä»¶ï¼šä¿å•å·²æ‰¿ä¿ï¼Œä¿å•å·ä¸ºIP3713202500007096
æµ‹è¯•æ­¥éª¤ï¼š
1. ç™»å½•ç†èµ”ç³»ç»Ÿ
2. é€‰æ‹©è¢«ä¿äººèº«æ•…ç†èµ”
3. è¾“å…¥å‡ºé™©åŸå› ä¸ºç–¾ç—…
4. æäº¤ç†èµ”ç”³è¯·
é¢„æœŸç»“æœï¼šç³»ç»Ÿè®¡ç®—èµ”ä»˜é‡‘é¢æ­£ç¡®ï¼Œç†èµ”æµç¨‹æˆåŠŸç»“æ¡ˆ
```

**ä¸å¥½çš„ä¾‹å­**ï¼š
```
æ ‡é¢˜ï¼šæµ‹è¯•ç†èµ”
æè¿°ï¼šç†èµ”æµ‹è¯•
```

### 2. é€‰æ‹©é«˜è´¨é‡çš„åœºæ™¯

åœºæ™¯åº”è¯¥ï¼š
- âœ… æœ‰æ˜ç¡®çš„ä¸šåŠ¡çº¿å’Œæ¸ é“
- âœ… æœ‰å®Œæ•´çš„å­—æ®µå®šä¹‰
- âœ… æœ‰åˆç†çš„ç¯èŠ‚ä¿¡æ¯

### 3. éªŒè¯ç”Ÿæˆçš„æ•°æ®

è™½ç„¶AIç”Ÿæˆçš„æ•°æ®é€šå¸¸æ˜¯åˆç†çš„ï¼Œä½†å»ºè®®ï¼š
- æ£€æŸ¥ç”Ÿæˆçš„ä¿å•å·ã€é™©ç§ä»£ç ç­‰æ˜¯å¦ç¬¦åˆå®é™…ä¸šåŠ¡
- éªŒè¯æ—¥æœŸæ ¼å¼å’Œæ—¶é—´é€»è¾‘
- ç¡®è®¤å…³é”®å­—æ®µçš„å€¼

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ç”¨ä¾‹æ•°æ®ç»“æ„è¯´æ˜](./CASE_DATA_STRUCTURE.md)
- [AIæ™ºèƒ½æ¨¡æ¿åŒ¹é…](./AI_TEMPLATE_MATCHING.md)
- [è‡ªåŠ¨åŒ–å¹³å°é›†æˆ](./AUTOMATION_PLATFORM_INTEGRATION.md)
- [v1.3.5.1 caseDefineä¿®å¤](./FIX_CASEDEFINE_MISSING.md)

---

## ğŸ“ æŠ€æœ¯å®ç°

### æ ¸å¿ƒæ–¹æ³•

**æ–‡ä»¶**ï¼š`backend/app/services/automation_service.py`

```python
def generate_case_body_by_ai(
    self,
    header_fields: List[Dict[str, Any]],
    test_case_info: Dict[str, Any],
    circulation: List[Dict[str, Any]] = None
) -> List[Dict[str, Any]]:
    """ä½¿ç”¨AIæ ¹æ®å­—æ®µå®šä¹‰å’Œæµ‹è¯•ç”¨ä¾‹ä¿¡æ¯ç”Ÿæˆæµ‹è¯•æ•°æ®(body)"""
    # 1. æ„å»ºå­—æ®µæè¿°
    # 2. æ„å»ºAIæç¤ºè¯
    # 3. è°ƒç”¨AIæœåŠ¡
    # 4. è§£æJSONå“åº”
    # 5. è½¬æ¢ä¸ºå®Œæ•´çš„bodyæ ¼å¼
    # 6. è¿”å›ç”Ÿæˆçš„æµ‹è¯•æ•°æ®
```

### é›†æˆç‚¹

åœ¨ `create_case_with_fields` æ–¹æ³•çš„ç¬¬4æ­¥ï¼š

```python
# ç¬¬å››æ­¥ï¼šä½¿ç”¨AIç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆbodyï¼‰
generated_body = self.generate_case_body_by_ai(
    header_fields=header_fields,
    test_case_info=test_case_info,
    circulation=circulation
)

# å°†ç”Ÿæˆçš„bodyæ·»åŠ åˆ°case_detailä¸­
case_detail['caseDefine']['body'] = generated_body
```

---

**ç‰ˆæœ¬**ï¼šv1.3.6  
**å‘å¸ƒæ—¥æœŸ**ï¼š2024-12-18  
**ä¸‹ä¸€æ­¥è®¡åˆ’**ï¼šæ”¯æŒæ›´å¤æ‚çš„æµ‹è¯•æ•°æ®ç”Ÿæˆåœºæ™¯





