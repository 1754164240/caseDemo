# 多模型配置菜单结构说明

## 📍 菜单位置

多模型配置功能已集成到**系统管理**页面中,作为一个标签页存在。

### 访问路径

```
主菜单 → 系统管理 → 模型配置标签页
```

### 具体步骤

1. 使用**超级管理员**账号登录系统
2. 点击左侧菜单的 **"系统管理"** (齿轮图标)
3. 在系统管理页面中,点击 **"模型配置"** 标签页
4. 开始管理模型配置

## 🎨 页面结构

### 系统管理页面标签页

系统管理页面包含以下标签页:

1. **Milvus 配置** - 向量数据库配置
2. **模型配置** ⭐ - 多个 AI 模型配置管理
3. **Embedding 配置** - Embedding 模型配置
4. **Prompt 配置** - 提示词模板配置

### 模型配置标签页内容

- **添加模型配置按钮** - 右上角
- **模型配置列表** - 表格展示所有配置
  - 默认标识(星标)
  - 配置名称和显示名称
  - 模型信息
  - API Key(脱敏)
  - 参数设置
  - 状态标签
  - 操作按钮(编辑、删除)

## 🔄 设计特点

### 当前设计

- ✅ 集成在"系统管理"页面下
- ✅ 作为标签页存在
- ✅ 支持多个模型配置
- ✅ 可以切换默认模型
- ✅ 更好的组织结构
- ✅ 与其他系统配置统一管理

## 💡 设计理由

### 为什么集成到系统管理?

1. **逻辑一致性**
   - 模型配置属于系统级配置
   - 与 Milvus、Embedding 等配置同级
   - 统一的配置管理入口

2. **减少菜单混乱**
   - 避免一级菜单项过多
   - 相关功能集中管理
   - 更清晰的信息架构

3. **权限管理**
   - 所有系统配置都需要超级管理员权限
   - 统一的权限控制
   - 更好的安全性

4. **用户体验**
   - 配置相关功能集中在一起
   - 减少页面跳转
   - 更直观的导航

## 🛠️ 技术实现

### 前端组件

#### Settings.tsx (系统管理页面)

```tsx
import ModelConfigs from './ModelConfigs'

// 在 Tabs 中添加新标签页
<TabPane
  tab={
    <span>
      <ApiOutlined />
      模型配置
    </span>
  }
  key="model-configs"
>
  <ModelConfigs embedded={true} />
</TabPane>
```

#### ModelConfigs.tsx (模型配置组件)

```tsx
interface ModelConfigsProps {
  embedded?: boolean  // 是否为嵌入模式
}

export default function ModelConfigs({ embedded = false }: ModelConfigsProps) {
  // embedded=true: 不显示外层 padding 和 Card 标题
  // embedded=false: 显示完整的独立页面样式
  
  return (
    <div style={{ padding: embedded ? 0 : 24 }}>
      <Card
        title={embedded ? undefined : <span>模型配置管理</span>}
        extra={<Button>添加模型配置</Button>}
      >
        {/* 表格内容 */}
      </Card>
    </div>
  )
}
```

### 路由配置

```tsx
// App.tsx
// 不需要独立的 /model-configs 路由
// 模型配置通过 /settings 路由访问

<Route path="/settings" element={
  <AdminRoute>
    <Settings />  {/* Settings 内部包含 ModelConfigs */}
  </AdminRoute>
} />
```

### 菜单配置

```tsx
// Layout.tsx
// 只显示"系统管理"菜单项

...(user?.is_superuser ? [
  {
    key: '/settings',
    icon: <SettingOutlined />,
    label: '系统管理',
  }
] : []),
```

## 📱 界面截图说明

### 1. 左侧菜单

```
┌─────────────────┐
│ 📊 工作台       │
│ 📄 需求管理     │
│ 📝 测试用例     │
│ 📚 知识问答     │
│ ⚙️  系统管理    │ ← 点击这里
│ 👤 个人中心     │
└─────────────────┘
```

### 2. 系统管理页面

```
┌─────────────────────────────────────────────────┐
│ 系统管理                                         │
├─────────────────────────────────────────────────┤
│ [Milvus配置] [模型配置] [Embedding] [Prompt]     │
│                  ↑                               │
│            点击这个标签页                          │
├─────────────────────────────────────────────────┤
│                                                  │
│  [添加模型配置]                                   │
│                                                  │
│  ┌──────────────────────────────────────────┐  │
│  │ ⭐ | 配置名称 | 模型信息 | API Key | 操作 │  │
│  ├──────────────────────────────────────────┤  │
│  │ ⭐ | default  | GPT-4    | sk-p***  | 编辑│  │
│  │ ☆ | qwen     | Qwen2.5  | ms-q***  | 编辑│  │
│  └──────────────────────────────────────────┘  │
│                                                  │
└─────────────────────────────────────────────────┘
```

## 🔍 常见问题

### Q: 如何访问模型配置?

**A:** 模型配置集成在"系统管理"页面下。请按以下步骤访问:
1. 点击左侧菜单的"系统管理"
2. 点击"模型配置"标签页

### Q: 支持配置多个模型吗?

**A:** 是的!新的模型配置功能支持:
- 配置多个不同的 AI 模型
- 为每个模型设置不同的参数
- 随时切换默认模型
- 启用/禁用特定配置

### Q: 普通用户能看到系统管理菜单吗?

**A:** 不能。只有**超级管理员**才能看到和访问"系统管理"菜单及其下的所有功能。

### Q: 可以同时使用多个模型吗?

**A:** 当前版本系统使用默认模型进行 AI 调用。您可以:
- 配置多个模型
- 随时切换默认模型
- 未来版本将支持场景化模型选择

## 📚 相关文档

- [功能说明](多模型配置功能说明.md) - 完整的功能介绍
- [快速开始](多模型配置快速开始.md) - 5分钟上手指南
- [测试指南](多模型配置测试指南.md) - 详细测试用例
- [实现总结](多模型配置实现总结.md) - 技术实现细节

## 📝 更新日志

### 2025-11-12 (最新)

- ✅ 删除旧版模型配置标签页
- ✅ 将"多模型配置"改名为"模型配置"
- ✅ 简化代码,删除不再使用的 modelForm 和 onSaveModel
- ✅ 更新所有相关文档

### 2025-11-12 (初版)

- ✅ 将模型配置集成到系统管理页面
- ✅ 作为标签页而非独立菜单
- ✅ 支持嵌入模式(embedded mode)
- ✅ 实现多模型配置管理功能

---

**位置**: 系统管理 → 模型配置
**权限**: 仅超级管理员
**状态**: ✅ 已完成

